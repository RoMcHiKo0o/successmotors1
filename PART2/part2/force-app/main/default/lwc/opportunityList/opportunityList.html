<!-- sldsValidatorIgnore -->
<template>
  <lightning-card>
    <lightning-accordion
    allow-multiple-sections-open
    >
    <template if:false={isAccPage}>
  <div class="slds-grid slds-grid_vertical-align-end slds-wrap">
      <lightning-input
          class="slds-size_1-of-4 slds-m-around_small"
          onchange={handleAccountChange}
          name="enter-search"
          label="Search Account"
          type="search">
      </lightning-input>
      <div
        class="slds-size_1-of-10 slds-m-around_small">
        <div></div>
        <select class="slds-select" id="select-01" onchange={handleSelectChange}>
          <option value="more">more than</option>
          <option value="equals">equals to</option>
          <option value="less">less than</option>
        </select>
      </div>
      <lightning-input
          class="slds-size_1-of-4 slds-m-vertical_small"
          onchange={handleAmountChange}
          name="enter-amount-search"
          label="Amount"
        
          type="number"
      ></lightning-input>
      
  </div>
</template>
    <template if:false={isLoaded}>

      <div class="slds-spinner_container">
        <div role="status" class="slds-spinner slds-spinner_medium slds-spinner_brand">
          <div class="slds-spinner__dot-a"></div>
          <div class="slds-spinner__dot-b"></div>
        </div>
      </div>
    </template>

    <template if:true={isLoaded}>
      
      <template if:true={hasAccs}>
        <template for:each={filteredAccs} for:item="acc">
            <div key={acc.Id}>
            <lightning-accordion-section name={acc.Id} label={acc.AccountAmount}>
              <template if:true={acc.hasOpps}>
                <lightning-datatable
                key-field="Id"
                data={acc.Opportunities}
                columns={columns}
                onrowaction={handleRowAction}
                hide-checkbox-column="true"
                >
              </lightning-datatable>
              </template>

              <template if:false={acc.hasOpps}> <div class="slds-m-left_small">
                No opportunities
              </div>
              </template>

            </lightning-accordion-section> 
            </div> 
        </template>
    </template>

    <template if:false={hasAccs}>
      <div class="slds-m-left_small">
        No accounts
      </div>
      </template>

    </template>


</lightning-accordion>
<template if:false={isAccPage}>
  <div class="slds-button-group" role="group">
    <button class="slds-button slds-button_neutral" disabled={noPrev} onclick={setPrevPage}>Previous</button>
    <button class="slds-button slds-button_neutral" disabled={noNext} onclick={setNextPage}>Next</button>
  </div>  
</template>
    
      </lightning-card>
</template>